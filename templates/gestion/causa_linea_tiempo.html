{% extends 'base.html' %}
{% block title %}Línea de tiempo - {{ causa.caratula }}{% endblock %}

{% block content %}
<div class="content-header">
    <div>
        <h1>Línea de tiempo</h1>
        <p class="lead">{{ causa.caratula }}</p>
    </div>
    <div>
        <a href="{% url 'gestion:causa_detalle' causa.pk %}" class="btn-link">← Volver a la causa</a>
    </div>
</div>

<div class="panel-card" style="margin-bottom: 20px;">
    <div class="panel-card-body">
        <p><strong>Tribunal:</strong> {{ causa.tribunal }}</p>
        <p><strong>Materia:</strong> {{ causa.materia }}</p>
        <p><strong>Estado actual:</strong> <span class="status-badge {{ causa.estado.color }}">{{ causa.estado.nombre }}</span></p>
    </div>
</div>

<div class="panel-card">
    <div class="panel-card-header">
        <h3>Historial de eventos</h3>
        <div class="muted-note">{{ eventos|length }} eventos registrados</div>
    </div>
    <div class="panel-card-body">
        <div class="timeline">
            {% for evento in eventos %}
            <div class="timeline-item">
                <div class="timeline-marker">
                    <span class="timeline-icon">{{ evento.icono }}</span>
                </div>
                <div class="timeline-content">
                    <div class="timeline-header">
                        <span class="timeline-fecha">
                            {% if evento.tipo == 'CREACION' %}
                                {{ evento.fecha|date:"d/m/Y" }}
                            {% else %}
                                {{ evento.fecha|date:"d/m/Y H:i" }}
                            {% endif %}
                        </span>
                        <span class="timeline-tipo timeline-tipo-{{ evento.tipo|lower }}">{{ evento.tipo }}</span>
                    </div>
                    <div class="timeline-titulo">{{ evento.titulo }}</div>
                    <div class="timeline-descripcion">{{ evento.descripcion }}</div>
                </div>
            </div>
            {% empty %}
            <p>No hay eventos registrados para esta causa.</p>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}